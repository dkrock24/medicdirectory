{% extends 'Layout/base_web/_web_base.html.twig' %}
{% block breadcrumb %}
    <!-- Breadcrumb Starts -->
    <div class="breadcrumb">
        <div class="container">
            <ul class="list-unstyled list-inline">
                <li><a href="{{ url('web_homepage') }}">Inicio</a></li>
                <li><a href="{{ url('web_homepage') }}">Doctores</a></li>
                <li class="active">Perfil</li>
            </ul>
        </div>
    </div>		
    <!-- Breadcrumb Ends -->
{% endblock %}




{%block body %}



<style type="text/css">
    .redes{
        text-align: center;
    }
    .circled {
        border-radius: 50%;
        display: inline-block;
        color: #fff;
        width: 1.3em;
        height: 1.3em;
        text-align: center;
        line-height: 1.3em;
        background: #5bc0de;
    }
    .circled:hover{
        background: grey;
    }
    .central{
    text-align: center;
}

.descripciones_esp{
    text-align: justify;
}
.cita_form{
    display: none;
}
</style>

<!--
<script type="text/javascript">

        $(document).ready(function() {
            /*
             *  Simple image gallery. Uses default settings
             */

            $('.fancybox').fancybox();

            /*
             *  Different effects
             */

            // Change title type, overlay closing speed
            $(".fancybox-effects-a").fancybox({
                helpers: {
                    title : {
                        type : 'outside'
                    },
                    overlay : {
                        speedOut : 0
                    }
                }
            });

            // Disable opening and closing animations, change title type
            $(".fancybox-effects-b").fancybox({
                openEffect  : 'none',
                closeEffect : 'none',

                helpers : {
                    title : {
                        type : 'over'
                    }
                }
            });

            // Set custom style, close if clicked, change title type and overlay color
            $(".fancybox-effects-c").fancybox({
                wrapCSS    : 'fancybox-custom',
                closeClick : true,

                openEffect : 'none',

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    overlay : {
                        css : {
                            'background' : 'rgba(238,238,238,0.85)'
                        }
                    }
                }
            });

            // Remove padding, set opening and closing animations, close if clicked and disable overlay
            $(".fancybox-effects-d").fancybox({
                padding: 0,

                openEffect : 'elastic',
                openSpeed  : 150,

                closeEffect : 'elastic',
                closeSpeed  : 150,

                closeClick : true,

                helpers : {
                    overlay : null
                }
            });

            /*
             *  Button helper. Disable animations, hide close button, change title type and content
             */

            $('.fancybox-buttons').fancybox({
                openEffect  : 'none',
                closeEffect : 'none',

                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });


            /*
             *  Thumbnail helper. Disable animations, hide close button, arrows and slide to next gallery item if clicked
             */

            $('.fancybox-thumbs').fancybox({
                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,
                arrows    : false,
                nextClick : true,

                helpers : {
                    thumbs : {
                        width  : 50,
                        height : 50
                    }
                }
            });

            /*
             *  Media helper. Group items, disable animations, hide arrows, enable media and button helpers.
            */
            $('.fancybox-media')
                .attr('rel', 'media-gallery')
                .fancybox({
                    openEffect : 'none',
                    closeEffect : 'none',
                    prevEffect : 'none',
                    nextEffect : 'none',

                    arrows : false,
                    helpers : {
                        media : {},
                        buttons : {}
                    }
                });

            /*
             *  Open manually
             */

            $("#fancybox-manual-a").click(function() {
                $.fancybox.open('1_b.jpg');
            });

            $("#fancybox-manual-b").click(function() {
                $.fancybox.open({
                    href : 'iframe.html',
                    type : 'iframe',
                    padding : 5
                });
            });

            $("#fancybox-manual-c").click(function() {
                $.fancybox.open([
                    {
                        href : '1_b.jpg',
                        title : 'My title'
                    }, {
                        href : '2_b.jpg',
                        title : '2nd title'
                    }, {
                        href : '3_b.jpg'
                    }
                ], {
                    helpers : {
                        thumbs : {
                            width: 75,
                            height: 50
                        }
                    }
                });
            });
        });
</script>
-->

    <!-- Doctor Profile Starts -->
    <div class="row">
        <div class="col-sm-4 col-xs-12">
            <div class="profile-block">
                <div class="panel panel-profile">
                    <div class="panel-heading">
                        <img src="{{ asset("bundles/web/images/profile-img1.jpg") }}" alt="Doctor Profile Image" class="img-responsive img-center-xs">
                        <h3 class="panel-title">{{ medico.usuario.cliUsuTitulo}} {{ medico.usuario.cliUsuUsu.usuPrimerApellido|title }} {{ medico.usuario.cliUsuUsu.usuSegundoApellido|title }}</h3>
                        <span class="panel-title">
                        {%for e in medico.especialidad %}
                            {{ e.idEspecialidad.espEspecialidad }} |
                        {% endfor %}
                        </span>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            {% for c in medico.redes %}
                                <a href="{#{ c.usuSocUrl}#}">
                                    <span class="label label-primary">{{ c.idSocialRed.socRedNombre }}</span>
                                </a>                                
                            {% endfor %}
                        </div>
                    
                    </div>
                    <div class="panel-footer text-center-md text-center-sm text-center-xs">
                        <div class="row">
                            <div class="col-lg-6 col-xs-12">
                                <a href="{{ path( "web_homepage") }}" class="btn btn-secondary">
                                    <i class="fa fa-arrow-circle-left"></i> Regresar</a>
                            </div>
                            <div class="col-lg-6 col-xs-12">                            
                                <a href="#" class="btn btn-secondary text-uppercase" id="solicitar_cita">Solicitar Cita</a>
                            </div>
                        </div>
                    </div>
                    <div class="cita_form">
                    <form id="solicitud_cita">
                        <div class="row">
                            <div class="alert alert-info alert-styled-left alert-arrow-left alert-component">
                                <button type="button" class="close" data-dismiss="alert"><span>×</span><span class="sr-only">Close</span></button>
                                <h6 class="alert-heading text-semibold">Ingresa la información Requerida.</h6>
                                En breve te contactaremos para brindarte nuestros servicios.
                            </div>
                        </div>
                        <input type="hidden" name="idCliente" id="idCliente" value="{{ medico.cliente.cliUsuCli.cliId }}" />
                        <input type="hidden" name="idUsuario" id="idUsuario" value="{{ medico.cliente.cliUsuCli.cliId }}" />
                        <div class="row">
                            <div class="col-sm-12 col-xs-12">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><i class="fa fa-user"></i></span>
                                <input type="text" class="form-control" id="nombre_1" required="true" placeholder="Nombre Completo" aria-describedby="basic-addon1">
                            </div>
                            </div>
                        </div>

                        <br>
                        <div class="row">
                            <div class="col-sm-12 col-xs-12">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><i class="fa fa-phone"></i></span>
                                <input type="text" class="form-control" id="telefono_1" required="true" placeholder="Telefono" aria-describedby="basic-addon1">
                            </div>
                            </div>
                        </div>

                        <br>
                        <div class="row">
                            <div class="col-sm-12 col-xs-12">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><i class="fa fa-envelope"></i></span>
                                <input type="text" class="form-control" id="correo_1" placeholder="Correo" aria-describedby="basic-addon1">
                            </div>
                            </div>
                        </div>

                        <br>
                        <div class="row">
                            <div class="col-sm-6 col-xs-6">
                                <div class="input-group">
                                    <span class="input-group-addon" id="basic-addon1"><i class="fa fa-calendar"></i></span>
                                    <input type='text' class="form-control birth_date" id="fecha_1" readonly="1" placeholder="Fecha" />
                                </div>
                            </div>
                            <div class="col-sm-6 col-xs-6">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
                                    <input type="text" class="form-control pickatime" id="hora_1" placeholder="Hora">
                                </div>
                            </div>                         
                        </div>

                        <br>
                        <div class="row">
                            <div class="col-sm-12 col-xs-12">                            
                                <textarea id="comentario" class="form-control" placeholder="Comentario"></textarea>                            
                            </div>
                        </div>

                        <br>
                        <div class="panel-footer text-center-md text-center-sm text-center-xs">
                            <a href="#" id="solicitud" class="btn btn-secondary">
                            <i class="fa fa-send"></i> Enviar</a>
                        </div>
                    </form>
                    </div>

                    

                </div>
            </div>
        </div>
        <div class="col-sm-8 col-xs-12">

            <article class="news-post">
            {#{ dump(medico)}#}
                <div class="inner">
                    <h4>
                        <a href="news-single.html">
                        {{ medico.usuario.cliUsuTitulo}}
                        {{ medico.usuario.cliUsuUsu.usuNombre|title }}
                        {{ medico.usuario.cliUsuUsu.usuSegundoNombre|title }}
                        {{ medico.usuario.cliUsuUsu.usuPrimerApellido|title }}
                        {{ medico.usuario.cliUsuUsu.usuSegundoApellido|title }}
                        </a>
                    </h4>
                    <h5>
                        {#{ medico.especialidad[0].idEspecialidad.espEspecialidad }#}
                    </h5>
                    <h6>
                        <span> </span>{{ medico.cliente.cliUsuCli.cliNombreComercial}}
                    </h6>
                    <h6>
                        <span> </span>{{ medico.cliente.cliUsuCli.cliDireccion}} /
                                    {{ medico.cliente.cliUsuCli.cliMun.munNombre}} -
                                    {{ medico.cliente.cliUsuCli.cliMun.munDep.depDepartamento}}
                                    
                    </h6>
                    <ul class="list-unstyled list-inline post-meta">
                        <li>
                            <i class="fa fa-eye"></i>Visitas {{ medico.vistas }}
                        </li>
                        <li>
                            <i class="fa fa-user"></i> By <a href="#">Admin</a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-comments-o"></i> 10 Comments
                            </a>
                        </li>
                        <li>
                            <i class="fa fa-building"></i><i class="fa fa-phone"></i>
                            {{ medico.cliente.cliUsuCli.clitelefono1 }} |
                            {{ medico.cliente.cliUsuCli.clitelefono2 }}
                        </li>
                    </ul>
                    <table class="table" width="100%" border=0>

                        <tbody>

                            <tr>
                                <td width="20%"><b>Información :</b> </td>
                                <td width="80%">
                                    {{ medico.usuario.cliUsuInfoPerfil }}
                                </td>
                            </tr>
                            <tr>
                                <td><b>Especialidades: </b></td>
                                <td>
                                    <table class="table-condensed">
                                        {% for e in medico.especialidad %}
                                        <tr>
                                            <td>
                                                <section class="descripciones_esp">
                                                    <i class="fa fa-check"></i><b> {{e.idEspecialidad.espEspecialidad }} :</b> {{e.descripcion }}
                                                </section>
                                            </td>
                                        </tr>                                     
                                        {% endfor %}
                                    </table>                                    
                                </td>
                            </tr>
                            <tr>
                                <td><b>Dias Laborales: </b></td>
                                <td>
                                    <table class="table-condensed"> 
                                        <tr>
                                            <td><i class="fa fa-briefcase"></i></td>
                                            <td> {{ medico.usuario.cliUsuDiasTrabajo }}</td>                                         
                                        </tr>
                                    </table>                                  
                                </td>
                            </tr>
                            <tr>
                                <td><b>Contactos:</b></td>
                                <td>
                                    <table class="table-condensed">                                        
                                        <tr>
                                            <td><i class="fa fa-envelope"></i></td>
                                            <td>{{ medico.usuario.cliUsuCorreo }}</td>                                         
                                        </tr>
                                        <tr>     
                                            <td><i class="fa fa-phone"></i></td>                                     
                                            <td>{{ medico.usuario.cliUsuTelefono }}</td>
                                        </tr>
                                    </table> 
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div>
                                        <!--
                                        <i class="fa fa-3x circled bg-skin central">24</i>
                                        <i class="fa fa-youtube fa-3x circled bg-skin central"></i>
                                        <i class="fa fa-twitter fa-3x circled bg-skin central"></i>
                                        <i class="fa fa-linkedin fa-3x circled bg-skin central"></i>       
                                        -->

                                    </div>                                    
                                </td>
                            </tr>
                         </tbody>
                    </table>
                        
                </div>
            </article>
        </div>
    </div>
    <hr>
    <div class="row">
    <!--
        <h4>GALERIA</h4>
        <p>

            <a class="fancybox" href="{{ asset("bundles/web/images/galeria/1_b.jpg") }}" data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
            <img src="{{ asset("bundles/web/images/galeria/2_s.jpg") }}" alt="" /></a>

            <a class="fancybox" href="{{ asset("bundles/web/images/galeria/2_b.jpg") }}" data-fancybox-group="gallery" title="Etiam quis mi eu elit temp">
            <img src="{{ asset("bundles/web/images/galeria/1_s.jpg") }}" alt="" /></a>

        </p>
        -->
    </div>
    <!-- Doctor Profile Ends -->

</div>

{% endblock %}


{% block codejs %}

<script>

    $(document).ready(function(){

        $("#solicitar_cita").click(function(){
            showForm();
        });

        $.datepicker.regional['es'] = {
                        closeText: 'Cerrar',
                        prevText: '< Ant',
                        nextText: 'Sig >',
                        currentText: 'Hoy',
                        monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                        monthNamesShort: ['Ene','Feb','Mar','Abr', 'May','Jun','Jul','Ago','Sep', 'Oct','Nov','Dic'],
                        dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
                        dayNamesShort: ['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],
                        dayNamesMin: ['Do','Lu','Ma','Mi','Ju','Vi','Sá'],
                        weekHeader: 'Sm',
                        dateFormat: 'yy-mm-dd',
                        firstDay: 1,
                        isRTL: false,
                        showMonthAfterYear: false,
                        yearSuffix: ''
                    };
                    $.datepicker.setDefaults($.datepicker.regional['es']);
                    $( ".birth_date" ).datepicker({
                        changeMonth: true,
                        changeYear: true,
                        //yearRange: '(new Date).getFullYear():'+(new Date).getFullYear()
                    });
        });

    function showForm(){
        $(".cita_form").show();
    }

    $('body').on('click', '#solicitud', function () {
        var id = 1;
        //validacion telefono
        var telefono    = $("#telefono_1").val();
        var nombre      = $("#nombre_1").val();
        var correo      = $("#correo_1").val();
        var idCliente   = $("#idCliente").val();
        var idUsuario   = $("#idUsuario").val();
        var comentario  = $("#comentario").text();
        var fecha       = $("#fecha_1").val();
        var hora        = $("#hora_1").val();


        if(telefono!=null && nombre!=null && correo!=null)
        {
            $.ajax({
            type: "post",
            url: "{{ path('web_solicitar_cita') }}",
            data: {idCliente: idCliente,idUsuario:idUsuario,telefono:telefono,nombre:nombre,correo:correo,comentario:comentario,fecha:fecha,hora:hora},
                error: function (data) {
                },
                success: function (data) {
                    alert(data);
                }
            });
        }       

        
    });





</script>

{% endblock  %}

